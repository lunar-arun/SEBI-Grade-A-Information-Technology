
---

# üìò **DATABASE CONCEPTS ‚Äî DETAILED NOTES**

---

# 1Ô∏è‚É£ **ER-MODEL (Entity‚ÄìRelationship Model)**

## **1. Key Components**

### **a) Entity**

* Real-world object with independent existence.
* **Types**:

  * **Strong Entity** ‚Äì has its own primary key.
  * **Weak Entity** ‚Äì depends on a strong entity; identified via **partial key**.

### **b) Attributes**

* **Simple** (Atomic ‚Äì e.g., Age),
* **Composite** (e.g., Name ‚Üí First, Last),
* **Single-valued**,
* **Multi-valued** (e.g., Phone Numbers),
* **Derived** (Age derived from DOB),
* **Key Attribute** (uniquely identifies entity).

| Attribute Type | Example                           |
| -------------- | --------------------------------- |
| Simple         | Name                              |
| Composite      | Address = (Street, City, Pincode) |
| Single-valued  | RollNo                            |
| Multi-valued   | PhoneNumber                       |
| Derived        | Age (from DOB)                    |
| Key attribute  | RollNo                            |


### **c) Relationships**

* Associations between entities.

### **d) Relationship Degree**

* **Unary (1 entity)** ‚Äì e.g., Employee supervises Employee
* **Binary (2 entities)** ‚Äì most common
* **Ternary (3 entities)** ‚Äì e.g., Supplier‚ÄìPart‚ÄìWarehouse

| Degree  | Meaning              | Example                      |
| ------- | -------------------- | ---------------------------- |
| Unary   | Within same entity   | Employee supervises Employee |
| Binary  | Between two entities | Student‚ÄìCourse               |
| Ternary | Among three entities | Supplier‚ÄìPart‚ÄìWarehouse      |

### **e) Cardinality Ratios**

* **1:1**, **1:N**, **N:1**, **M:N**

| Type | Meaning      | Example         |
| ---- | ------------ | --------------- |
| 1:1  | One to One   | Person‚ÄìPassport |
| 1:N  | One to Many  | Dept‚ÄìEmployees  |
| M:N  | Many to Many | Student‚ÄìCourse  |


### **f) Participation Constraints**

* **Total Participation** ‚Äì every entity must participate
* **Partial Participation**

### **g) Weak Entity Representation**

* Double rectangle (entity), double diamond (relationship).

---

# 2Ô∏è‚É£ **RELATIONAL MODEL**

## **1. Basic Terminology**

* **Relation** ‚Üí Table
* **Tuple** ‚Üí Row
* **Attribute** ‚Üí Column
* **Domain** ‚Üí Set of allowed attribute values
* **Relation Schema** ‚Üí Structure (e.g., Student(Roll, Name, Age))
* **Relation State** ‚Üí Actual table content at a point in time

## **2. Keys**

* **Super Key** ‚Äì any set of attributes that uniquely identifies a tuple
* **Candidate Key** ‚Äì minimal super key
* **Primary Key** ‚Äì chosen candidate key
* **Alternate Key** ‚Äì remaining candidate keys
* **Foreign Key** ‚Äì refers to primary key of another table

---

# 3Ô∏è‚É£ **RELATIONAL ALGEBRA (Procedural Query Language)**

## **Basic Operations**

### **1. Selection (œÉ)**

Selects rows based on condition.
Example:
œÉ<sub>Age > 20</sub>(Student)

### **2. Projection (œÄ)**

Selects specific columns.
œÄ<sub>Name, Age</sub>(Student)

### **3. Union ( ‚à™ )**

Requires **union compatibility** (same no. of attributes & domains).

### **4. Set Difference ( ‚àí )**

### **5. Cartesian Product ( √ó )**

### **6. Rename (œÅ)**

œÅ<sub>NewName</sub>(Relation)

## **Advanced Operations**

### **7. Join (‚®ù)**

* **Natural Join**
* **Theta Join**
* **Equi Join**
* **Outer Joins (Left, Right, Full)**

### **8. Division (√∑)**

Used to answer queries like:
‚ÄúFind students who took all courses.‚Äù

---

# 4Ô∏è‚É£ **TUPLE CALCULUS (Non-procedural Query Language)**

## **Types**

1. **Tuple Relational Calculus (TRC)**
2. **Domain Relational Calculus (DRC)**

## **TRC Syntax**

{ t | P(t) }
t ‚Üí tuple variable
P(t) ‚Üí predicate (condition)

Example:
{ t | t ‚àà Student ‚àß t.Age > 20 }

## **DRC Syntax**

{ <a‚ÇÅ, a‚ÇÇ ‚Ä¶> | P(a‚ÇÅ, a‚ÇÇ ‚Ä¶) }

Example:
{ <n> | ‚àÉr ‚àà Student (r.Name = n ‚àß r.Age > 20) }

---

# 5Ô∏è‚É£ **INTEGRITY CONSTRAINTS**

## **1. Domain Constraints**

Attribute values must belong to a valid domain.

## **2. Entity Integrity**

Primary key cannot be NULL.

## **3. Referential Integrity**

Foreign key must refer to an existing primary key (or be NULL).

## **4. Key Constraints**

No two tuples can have same primary key.

## **5. Business / Semantic Constraints**

Application-specific rules (e.g., Salary > 0).

---

# 6Ô∏è‚É£ **NORMAL FORMS**

## **1. Functional Dependency (FD)**

X ‚Üí Y means: Attribute set X uniquely determines Y.

---

## **2. 1NF: First Normal Form**

* No multi-valued or composite attributes.
* All attributes atomic.

---

## **3. 2NF: Second Normal Form**

* Must be in **1NF**
* No **partial dependency** (i.e., non-key attributes must depend on entire primary key)

Applicable only when PK is composite.

---

## **4. 3NF: Third Normal Form**

* Must be in **2NF**
* No **transitive dependency**
  (A ‚Üí B ‚Üí C where A is primary key)

---

## **5. BCNF (Boyce‚ÄìCodd Normal Form)**

* For every FD: **X ‚Üí Y**

  * X must be a **super key**

BCNF is stricter than 3NF.

---

## **6. 4NF**

* No multi-valued dependencies.

---

## **7. 5NF**

* No join dependency anomalies.

---

# 7Ô∏è‚É£ **FILE ORGANIZATION**

## **1. Heap (Unordered) File**

* Records stored randomly.
* Pros: Insertions fast
* Cons: Searches slow

## **2. Sequential File**

* Records stored in sorted order.
* Pros: Fast range queries
* Cons: Insert slow (need reordering)

## **3. Hashing**

* Hash function computes block address.
* Pros: O(1) lookup
* Cons: Poor for range queries

### Types:

* **Static Hashing**
* **Dynamic Hashing** (Extendible, Linear Hashing)

---

# 8Ô∏è‚É£ **INDEXING**

Indexes improve search performance.

## **1. Primary Index**

* Built on primary key
* Sparse index

## **2. Secondary Index**

* Built on non-key attribute
* Dense index

## **3. Clustering Index**

* Index on non-primary key that orders data blocks.

---

## **4. B-Tree Index**

### Characteristics:

* Self-balancing search tree
* Node contains **keys + pointers**
* All leaf nodes at the same level
* Good for random and range queries

### Operations

* Search: O(log n)
* Insert / Delete maintain balance

---

## **5. B+-Tree Index**

Most widely used in databases.

### Key Features:

* All keys stored only in **leaf nodes**
* Internal nodes store only routing keys
* Leaf nodes linked as a linked list (good for range queries)
* Better space utilization and read efficiency

### Advantages:

* Faster range search
* Balanced at all times
* Supports disk-based indexing efficiently

---

# 9Ô∏è‚É£ **TRANSACTIONS AND CONCURRENCY CONTROL**

## **1. Transaction**

Sequence of operations that form a single logical unit of work.

### **ACID Properties**

* **Atomicity** ‚Äì all or nothing
* **Consistency** ‚Äì DB moves from one valid state to another
* **Isolation** ‚Äì intermediate states invisible to others
* **Durability** ‚Äì changes persist even after crash

---

## **2. Concurrency Problems**

Occurs when multiple transactions execute simultaneously.

### **Anomalies:**

1. **Dirty Read** ‚Äì reading uncommitted data
2. **Unrepeatable Read** ‚Äì same query returns different results
3. **Phantom Read** ‚Äì new rows appear when re-reading
4. **Lost Update** ‚Äì two updates overwrite each other

---

## **3. Concurrency Control Techniques**

### **a) Locking**

* **Shared Lock (S)** ‚Äì read
* **Exclusive Lock (X)** ‚Äì write

### **Two-Phase Locking (2PL)**

* Growing phase ‚Üí acquire locks
* Shrinking phase ‚Üí release locks
  Guarantees **serializability**.

### **Types of 2PL**

* **Strict 2PL** ‚Äì release locks at transaction end
* **Rigorous 2PL** ‚Äì stronger, all locks held till commit

---

### **b) Timestamp Ordering**

* Each transaction assigned timestamp
* Conflicts resolved based on timestamps

---

### **c) Optimistic Concurrency Control**

* Assumes conflicts are rare
* Validation before commit

---

## **4. Deadlock**

Two transactions wait for each other.

### **Deadlock Handling**

* **Prevention** (ordering of locks)
* **Detection and Recovery** (wait-for graph)
* **Timeout**

---

## **5. Recovery Techniques**

### **a) Log-based Recovery**

* Undo/redo using log
* Write-Ahead Logging (WAL)

### **b) Checkpointing**

* Reduces recovery time

---

# üìò **SEBI Grade A IT ‚Äî Database MCQs (Practice Set)**

---

# **MCQs**

### **1. Which of the following is TRUE about a weak entity?**

a) It always has a primary key
b) It cannot exist without a strong entity
c) It has only composite attributes
d) It does not participate in any relationship

---

### **2. In an ER diagram, total participation of an entity is represented by:**

a) Single line
b) Double line
c) Dashed line
d) Diamond symbol

---

### **3. A relation is in **2NF** only if:**

a) It has no transitive dependencies
b) It has a composite primary key
c) It has no partial dependencies
d) It is in BCNF

---

### **4. Which of the following is a **super key**?**

a) Minimal set of attributes that uniquely identifies tuples
b) Any set of attributes that uniquely identifies tuples
c) Only primary key
d) Only foreign key

---

### **5. Functional dependency A ‚Üí B indicates:**

a) B uniquely determines A
b) A uniquely determines B
c) A is a super key
d) B is a primary key

---

### **6. Which relational algebra operator is used to select specific columns?**

a) œÉ (Selection)
b) œÄ (Projection)
c) √ó (Cartesian product)
d) √∑ (Division)

---

### **7. Which normal form removes **transitive dependencies**?**

a) 1NF
b) 2NF
c) 3NF
d) BCNF

---

### **8. In a B+ tree:**

a) All data records are stored in internal nodes
b) All data records are stored in leaf nodes
c) Internal nodes contain full records
d) Leaf nodes do not store pointers

---

### **9. Which file organization is BEST for **range queries**?**

a) Heap file
b) Hashing
c) Sequential file
d) Random file

---

### **10. Dirty read occurs when:**

a) Uncommitted data is read
b) Two transactions read the same value
c) A transaction reads phantom rows
d) Two transactions overwrite each other

---

### **11. Strict Two-Phase Locking (Strict 2PL) ensures:**

a) No transaction gets blocked
b) No deadlock occurs
c) Serializability and recoverability
d) Only deadlock recovery

---

### **12. A foreign key must:**

a) Always be a primary key
b) Refer to an existing primary key or be NULL
c) Be unique
d) Only refer to composite keys

---

### **13. Which is **NOT** an integrity constraint?**

a) Domain constraint
b) Referential integrity
c) Authorization rule
d) Entity integrity

---

### **14. The Cartesian product of relation R(a,b) and S(c,d) has:**

a) Sum of attributes
b) Maximum of attributes
c) Product of attributes
d) Combined attributes (a,b,c,d)

---

### **15. Which operation is used in relational algebra to answer ‚Äústudents who took all courses‚Äù?**

a) Join
b) Union
c) Division
d) Intersection

---

### **16. BCNF is stricter than 3NF because:**

a) It allows partial dependency
b) It allows transitive dependency
c) LHS of every FD must be a super key
d) RHS of FD must be atomic

---

### **17. In timestamp-based concurrency control, older transactions:**

a) Always get priority
b) Are always rolled back
c) Are always aborted if conflict occurs
d) Need not follow ACID properties

---

### **18. In extendible hashing, directory grows:**

a) Linearly
b) Only when collisions occur
c) When global depth increases
d) Only when buckets split

---

### **19. The purpose of checkpointing in recovery is:**

a) Speed up transaction execution
b) Reduce recovery time after crash
c) Reduce number of locks
d) Remove deadlocks

---

### **20. Which isolation level allows phantom reads?**

a) Read Uncommitted
b) Read Committed
c) Repeatable Read
d) Serializable

---

# ‚úÖ **ANSWER KEY**

1-b
2-b
3-c
4-b
5-b
6-b
7-c
8-b
9-c
10-a
11-c
12-b
13-c
14-d
15-c
16-c
17-a
18-c
19-b
20-c

---

